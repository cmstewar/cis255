<!DOCTYPE html>
<html>
<form action="https://github.com/cmstewar/cis255">
    <input type="submit" value="Go to Github" />
</form>
<body>

<h1>The XMLHttpRequest Object</h1>

<p id="demo">Let AJAX change this text.</p>
<button type="button" onclick="loadDoc();">Change Content</button>
<button type="button" onclick="showDoc(obj);">Change Content1</button>
<button type="button" onclick="showByRoom(myArray);">Change Content2</button>

<script>
rt = " ";
function loadDoc() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("demo").innerHTML = this.responseText;
      rt = this.responseText;
      obj = JSON.parse(rt); 
    }
  };
  xhttp.open("GET", "https://api.svsu.edu/courses?prefix=CIS&courseNumber=255", true);
  xhttp.send();
}
function showDoc(obj){ 
  xx = "";
    for(var i =0; i < obj.courses.length ; i++) 
 xx = xx + obj.courses[i].prefix + " " 
	         + obj.courses[i].courseNumber + " " 
			 + obj.courses[i].meetingTimes[0].building + " " 
			 + obj.courses[i].meetingTimes[0].room +" <br>";
    document.getElementById("demo").innerHTML = xx;
}

function sortByRoom(a, b){
	const roomA = a.meetingTimes.room;
	const roomB = b.meetingTimes.room;

	let comparison = 0;
	if (roomA > roomB)
		{
			comparison = 1;
		}
	else if (roomA < roomB)
		{
			comparison = -1;
		}
	return comparison;

 myArray = obj.courses.meetingTimes.room.sort(showByRoom(a, b));
	

}
function showByRoom(myArray){
    document.getElementById("demo").innerHTML = myArray;

}
</script>

</body>
</html>
